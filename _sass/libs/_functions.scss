@use 'vars' as vars;

/// Replaces a substring within a string.
/// @author Hugo Giraudel
/// @param {String} $string - Initial string.
/// @param {String} $search - Substring to replace.
/// @param {String} $replace ('') - New value.
/// @return {String} - Updated string.
@function str-replace($string, $search, $replace: '') {

	$index: str-index($string, $search);

	@if $index {
		@return str-slice($string, 1, $index - 1) + $replace + str-replace(str-slice($string, $index + str-length($search)), $search, $replace);
	}

	@return $string;

}

/// Gets a duration value.
/// @param {string} $keys Key(s).
/// @return {string} Value.
@function _duration($keys...) {
    @return val(vars.$duration, $keys...);
}

/// Gets a font value.
/// @param {string} $keys Key(s).
/// @return {string} Value.
@function _font($keys...) {
    @return val(vars.$font, $keys...);
}

/// Gets a misc value.
/// @param {string} $keys Key(s).
/// @return {string} Value.
@function _misc($keys...) {
    @return val(vars.$misc, $keys...);
}

/// Gets a palette value.
/// @param {string} $keys Key(s).
/// @return {string} Value.
@function _palette($keys...) {
    @return val(vars.$palette, $keys...);
}

/// Gets a size value.
/// @param {string} $keys Key(s).
/// @return {string} Value.
@function _size($keys...) {
    @return val(vars.$size, $keys...);
}

// --- moved val() implementation (was in _skel.scss) ---
/// Gets a value from a map.
/// @author Hugo Giraudel
/// @param {map} $map Map.
/// @param {string} $keys Key(s).
/// @return {string} Value.
@function val($map, $keys...) {

  @if nth($keys, 1) == null {
    $keys: remove-nth($keys, 1);
  }

  @each $key in $keys {
    $map: map-get($map, $key);
  }

  @return $map;

}

// --- end moved val() ---

// --- public wrappers for module API ---
@function palette($keys...) {
  @return val(vars.$palette, $keys...);
}

@function font($keys...) {
  @return val(vars.$font, $keys...);
}

@function size($keys...) {
  @return val(vars.$size, $keys...);
}

@function duration($keys...) {
  @return val(vars.$duration, $keys...);
}

@function misc($keys...) {
  @return val(vars.$misc, $keys...);
}
